A drupal module and some associates elisp code that will allo wyou to manage drupal content in emacs org-mode


INSTALLATION

* Install the drupal module
* Configure the drupal module
* Create a directory under your default files directory where the files will be kept
* Setup the variables below for your publishing directory, using tramp this can be a remote directory on your web server

USAGE

* To create a new post you would run: org-drupal-new-post
* To pubish run org-publish-project and type "drupal"
* Drupal will update on cron or you can log in to force it 

;;you need to have the org-publish code loaded
(require 'org-publish)

;;here we set up some good defaults for the drupal export
(setq org-publish-project-alist
      '(

       ("drupal-posts"
	 :base-directory "X:\\drupalorg\\sites\\default\\files\\drupalorg"
	 :base-extension "org"
	 :publishing-directory "X:\\drupalorg\\sites\\default\\files\\drupalorg\\output"
	 :recursive t
	 :publishing-function org-publish-org-to-html
	 :headline-levels 4             ; Just the default for this project.
	 :auto-preamble t
         :body-only t
	 :auto-index nil
	 :auto-preamble nil
         :htmlized-source t
	 )
       ("drupal-static"
         :base-directory "~/org/"
         :base-extension "css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf"
         :publishing-directory "~/public_html/"
         :recursive t
         :publishing-function org-publish-attachment
         )
       ("drupal" :components ("drupal-posts" "drupal-static"))
      ))

;; this makes sure we publish if no files are modified
(setq org-publish-use-timestamps-flag nil)

;;we need to create a time format object
(defcustom header-date-format t
  "*Date/time format for header timestamp.
The value can be a string, t, or nil.
A string value is passed to `format-time-string'.
t means use local time with timezone; nil means use UTC."
  :group 'Automatic-File-Header
  :type '(choice
          (const  :tag "Local time, with timezone" t)
          (const  :tag "UTC" nil)
          (string :tag "Custom format")))

;;create a new post and insert the file headers
(defun org-drupal-new-post (title)
  "Create a new post for org-drupal."
  (interactive (list (read-string "Post title:")) )
  (setq title (replace-regexp-in-string "\s" "-" title))
  (find-file-other-window (concat "X:\\drupalorg\\sites\\default\\files\\drupalorg" "\\" title ".org"))
  (insert (concat "#+TAXONOMY: 
#+USER: 
#+IMAGE: 
#+URL: 
#+COMMENTS : 1
#+STATUS: 1
#+PROMOTE: 1
#+DATE: <" (format-time-string
   (cond ((stringp header-date-format) header-date-format)
         (header-date-format "%Y-%m-%d %a %T")
         (t                  "%Y-%m-%dT%T%z")) ; An alternative: "%a %b %e %T %Y (UTC)"
   (current-time)
   (not header-date-format)) ">\n\n")))